[gd_scene load_steps=22 format=2]

[ext_resource path="res://sounds/click.wav" type="AudioStream" id=1]
[ext_resource path="res://sounds/default.mp3" type="AudioStream" id=2]
[ext_resource path="res://assets/placeholder_compras_noticias.png" type="Texture" id=3]
[ext_resource path="res://assets/botao_compra_venda.png" type="Texture" id=4]
[ext_resource path="res://sounds/lost_money.wav" type="AudioStream" id=5]
[ext_resource path="res://sounds/BUY_ITEM.wav" type="AudioStream" id=6]
[ext_resource path="res://sounds/DELETE_ITEM.wav" type="AudioStream" id=7]
[ext_resource path="res://sounds/NEW_NEWS.wav" type="AudioStream" id=8]
[ext_resource path="res://assets/espaço_disponivel.png" type="Texture" id=9]
[ext_resource path="res://assets/mini_bolsa.png" type="Texture" id=10]
[ext_resource path="res://assets/mini_fazenda.png" type="Texture" id=11]
[ext_resource path="res://assets/mini_fabrica.png" type="Texture" id=12]
[ext_resource path="res://assets/mini_musica.png" type="Texture" id=13]
[ext_resource path="res://assets/mini_bitcoin.png" type="Texture" id=14]
[ext_resource path="res://assets/mini_programador.png" type="Texture" id=15]
[ext_resource path="res://assets/mini_startup.png" type="Texture" id=16]
[ext_resource path="res://assets/howto.png" type="Texture" id=17]
[ext_resource path="res://scenes/first_scene/DetailsDialog.tscn" type="PackedScene" id=18]

[sub_resource type="GDScript" id=1]
script/source = "extends Node2D

var bank = 500
var select_bitcoin = 0
var select_slot = 0
var tex3 = preload(\"res://assets/mini_bolsa.png\")
onready var bit = get_node(\"MarginContainer/HBoxContainer/CenterContainer/itens/MarginContainer/VBoxContainer/ScrollContainer/ItemList/TextureButton\")

func _ready():
	$MarginContainer/HBoxContainer/VBoxContainer/money.text = \"$ \" + String(bank)
	#$backtrack.play()
	yield($backtrak , \"finished\")
	pass

func update_money():
	$MarginContainer/HBoxContainer/VBoxContainer/money.text = \"$ \" + String(bank)
	pass

func _on_buy_pressed():
	$buy_item.play()
	yield($buy_item, \"finished\")
	if($MarginContainer/HBoxContainer/CenterContainer/itens/MarginContainer/VBoxContainer/ScrollContainer/VBoxContainer/bitcoin.pressed):
		$MarginContainer/HBoxContainer/VBoxContainer/ScrollContainer/VBoxContainer/slot1.texture_normal = load(\"res://assets/bitcoin.png\")
		compute_compra(1,1)
	else:
		$DetailsDialog.open('',\"Não foi selecionado um item para compra\")
	pass


func _on_sell_pressed():
	$sell_item.play()
	yield($sell_item, \"finished\")
	if(select_slot!=0):
		compute_compra(100,2)
		$MarginContainer/HBoxContainer/VBoxContainer/ScrollContainer/VBoxContainer/slot1.texture_normal = load(\"res://assets/espaço_disponivel.png\")
	pass # Replace with function body.


func _on_TextureButton_pressed():
	bit.set('texture',tex3)
	$new_news.play()
	yield($new_news, \"finished\")
	pass # Replace with function body.
	
func compute_compra(tipo, operacao):
	match operacao:
		1: 
			match tipo:
				1:
					bank-=100
					update_money()
				2:
					bank-=100
					update_money()
				3:
					bank-=100
					update_money()
				4:
					bank-=100
					update_money()
				5:
					bank-=100
					update_money()
				6:
					bank-=100
					update_money()
				7:
					bank-=100
					update_money()
			
		2: 
			match tipo:
				1:
					bank+=100
					update_money()
				2:
					bank+=100
					update_money()
				3:
					bank+=100
					update_money()
				4:
					bank+=100
					update_money()
				5:
					bank+=100
					update_money()
				6:
					bank+=100
					update_money()
				7:
					bank+=100
					update_money()
	pass

func _on_bitcoin_pressed():
	$button_click.play()
	yield($button_click , \"finished\")
	pass # Replace with function body.


func _on_slot1_pressed():
	$button_click.play()
	yield($button_click , \"finished\")
	if(select_slot==0):
		select_slot = 1
	else:
		select_slot = 0
	pass # Replace with function body.
"

[sub_resource type="StyleBoxEmpty" id=2]

[sub_resource type="Theme" id=3]
Button/colors/font_color = Color( 0.88, 0.88, 0.88, 1 )
Button/colors/font_color_disabled = Color( 0.9, 0.9, 0.9, 0.2 )
Button/colors/font_color_hover = Color( 0.94, 0.94, 0.94, 1 )
Button/colors/font_color_pressed = Color( 1, 1, 1, 1 )
Button/constants/hseparation = 2
Button/fonts/font = null
Button/styles/disabled = null
Button/styles/focus = null
Button/styles/hover = null
Button/styles/normal = null
Button/styles/pressed = null
CheckBox/colors/font_color = Color( 0.88, 0.88, 0.88, 1 )
CheckBox/colors/font_color_disabled = Color( 0.9, 0.9, 0.9, 0.2 )
CheckBox/colors/font_color_hover = Color( 0.94, 0.94, 0.94, 1 )
CheckBox/colors/font_color_hover_pressed = Color( 1, 1, 1, 1 )
CheckBox/colors/font_color_pressed = Color( 1, 1, 1, 1 )
CheckBox/constants/check_vadjust = 0
CheckBox/constants/hseparation = 4
CheckBox/fonts/font = null
CheckBox/icons/checked = null
CheckBox/icons/radio_checked = null
CheckBox/icons/radio_unchecked = null
CheckBox/icons/unchecked = null
CheckBox/styles/disabled = null
CheckBox/styles/focus = null
CheckBox/styles/hover = null
CheckBox/styles/hover_pressed = null
CheckBox/styles/normal = null
CheckBox/styles/pressed = null
VScrollBar/icons/decrement = null
VScrollBar/icons/decrement_highlight = null
VScrollBar/icons/increment = null
VScrollBar/icons/increment_highlight = null
VScrollBar/styles/grabber = null
VScrollBar/styles/grabber_highlight = null
VScrollBar/styles/grabber_pressed = null
VScrollBar/styles/scroll = SubResource( 2 )
VScrollBar/styles/scroll_focus = null

[node name="Main" type="Node2D"]
position = Vector2( 1.30472, 1.2048 )
script = SubResource( 1 )

[node name="MarginContainer" type="MarginContainer" parent="."]
anchor_right = 1.0
anchor_bottom = 1.0
margin_left = -1.0
margin_top = -1.0
margin_right = 320.0
margin_bottom = 158.0
theme = SubResource( 3 )
custom_constants/margin_top = 10
__meta__ = {
"_edit_use_anchors_": false
}

[node name="HBoxContainer" type="HBoxContainer" parent="MarginContainer"]
margin_top = 10.0
margin_right = 321.0
margin_bottom = 159.0

[node name="CenterContainer" type="CenterContainer" parent="MarginContainer/HBoxContainer"]
margin_right = 90.0
margin_bottom = 149.0
size_flags_horizontal = 3
size_flags_vertical = 3

[node name="itens" type="TextureRect" parent="MarginContainer/HBoxContainer/CenterContainer"]
margin_left = 11.0
margin_top = 7.0
margin_right = 79.0
margin_bottom = 141.0
texture = ExtResource( 3 )

[node name="MarginContainer" type="MarginContainer" parent="MarginContainer/HBoxContainer/CenterContainer/itens"]
margin_left = 1.0
margin_top = 1.0
margin_right = 66.0
margin_bottom = 130.0
custom_constants/margin_right = 0
custom_constants/margin_top = 3
custom_constants/margin_left = 2
__meta__ = {
"_edit_use_anchors_": false
}

[node name="VBoxContainer" type="VBoxContainer" parent="MarginContainer/HBoxContainer/CenterContainer/itens/MarginContainer"]
margin_left = 2.0
margin_top = 3.0
margin_right = 65.0
margin_bottom = 129.0
size_flags_horizontal = 3
size_flags_vertical = 3

[node name="MarginContainer" type="MarginContainer" parent="MarginContainer/HBoxContainer/CenterContainer/itens/MarginContainer/VBoxContainer"]
margin_right = 63.0
margin_bottom = 18.0
custom_constants/margin_left = 1

[node name="HBoxContainer" type="HBoxContainer" parent="MarginContainer/HBoxContainer/CenterContainer/itens/MarginContainer/VBoxContainer/MarginContainer"]
margin_left = 1.0
margin_right = 63.0
margin_bottom = 18.0

[node name="buy" type="TextureButton" parent="MarginContainer/HBoxContainer/CenterContainer/itens/MarginContainer/VBoxContainer/MarginContainer/HBoxContainer"]
margin_right = 28.0
margin_bottom = 18.0
texture_normal = ExtResource( 4 )

[node name="sell" type="TextureButton" parent="MarginContainer/HBoxContainer/CenterContainer/itens/MarginContainer/VBoxContainer/MarginContainer/HBoxContainer"]
margin_left = 32.0
margin_right = 60.0
margin_bottom = 18.0
texture_normal = ExtResource( 4 )

[node name="ScrollContainer" type="ScrollContainer" parent="MarginContainer/HBoxContainer/CenterContainer/itens/MarginContainer/VBoxContainer"]
margin_top = 22.0
margin_right = 63.0
margin_bottom = 126.0
size_flags_horizontal = 3
size_flags_vertical = 3
scroll_horizontal_enabled = false

[node name="VBoxContainer" type="VBoxContainer" parent="MarginContainer/HBoxContainer/CenterContainer/itens/MarginContainer/VBoxContainer/ScrollContainer"]
margin_right = 63.0
margin_bottom = 138.0
size_flags_horizontal = 3
size_flags_vertical = 3
custom_constants/separation = 2

[node name="bitcoin" type="TextureButton" parent="MarginContainer/HBoxContainer/CenterContainer/itens/MarginContainer/VBoxContainer/ScrollContainer/VBoxContainer"]
margin_right = 63.0
margin_bottom = 18.0
toggle_mode = true
action_mode = 0
texture_normal = ExtResource( 14 )
texture_pressed = ExtResource( 17 )
__meta__ = {
"_edit_use_anchors_": false
}

[node name="bolsa" type="TextureButton" parent="MarginContainer/HBoxContainer/CenterContainer/itens/MarginContainer/VBoxContainer/ScrollContainer/VBoxContainer"]
margin_top = 20.0
margin_right = 63.0
margin_bottom = 38.0
toggle_mode = true
texture_normal = ExtResource( 10 )
__meta__ = {
"_edit_use_anchors_": false
}

[node name="fabrica" type="TextureButton" parent="MarginContainer/HBoxContainer/CenterContainer/itens/MarginContainer/VBoxContainer/ScrollContainer/VBoxContainer"]
margin_top = 40.0
margin_right = 63.0
margin_bottom = 58.0
toggle_mode = true
texture_normal = ExtResource( 12 )
__meta__ = {
"_edit_use_anchors_": false
}

[node name="fazenda" type="TextureButton" parent="MarginContainer/HBoxContainer/CenterContainer/itens/MarginContainer/VBoxContainer/ScrollContainer/VBoxContainer"]
margin_top = 60.0
margin_right = 63.0
margin_bottom = 78.0
toggle_mode = true
texture_normal = ExtResource( 11 )
__meta__ = {
"_edit_use_anchors_": false
}

[node name="musica" type="TextureButton" parent="MarginContainer/HBoxContainer/CenterContainer/itens/MarginContainer/VBoxContainer/ScrollContainer/VBoxContainer"]
margin_top = 80.0
margin_right = 63.0
margin_bottom = 98.0
toggle_mode = true
texture_normal = ExtResource( 13 )
__meta__ = {
"_edit_use_anchors_": false
}

[node name="programador" type="TextureButton" parent="MarginContainer/HBoxContainer/CenterContainer/itens/MarginContainer/VBoxContainer/ScrollContainer/VBoxContainer"]
margin_top = 100.0
margin_right = 63.0
margin_bottom = 118.0
toggle_mode = true
texture_normal = ExtResource( 15 )
__meta__ = {
"_edit_use_anchors_": false
}

[node name="startup" type="TextureButton" parent="MarginContainer/HBoxContainer/CenterContainer/itens/MarginContainer/VBoxContainer/ScrollContainer/VBoxContainer"]
margin_top = 120.0
margin_right = 63.0
margin_bottom = 138.0
toggle_mode = true
texture_normal = ExtResource( 16 )
__meta__ = {
"_edit_use_anchors_": false
}

[node name="VBoxContainer" type="VBoxContainer" parent="MarginContainer/HBoxContainer"]
margin_left = 94.0
margin_right = 226.0
margin_bottom = 149.0
size_flags_horizontal = 3

[node name="money" type="Label" parent="MarginContainer/HBoxContainer/VBoxContainer"]
margin_right = 132.0
margin_bottom = 14.0
text = "$ 500,00"
align = 1

[node name="ScrollContainer" type="ScrollContainer" parent="MarginContainer/HBoxContainer/VBoxContainer"]
margin_top = 18.0
margin_right = 132.0
margin_bottom = 149.0
size_flags_horizontal = 3
size_flags_vertical = 3
scroll_horizontal_enabled = false

[node name="VBoxContainer" type="VBoxContainer" parent="MarginContainer/HBoxContainer/VBoxContainer/ScrollContainer"]
margin_right = 132.0
margin_bottom = 282.0
size_flags_vertical = 3
custom_constants/separation = 5
__meta__ = {
"_edit_use_anchors_": false
}

[node name="slot1" type="TextureButton" parent="MarginContainer/HBoxContainer/VBoxContainer/ScrollContainer/VBoxContainer"]
margin_right = 132.0
margin_bottom = 36.0
toggle_mode = true
texture_normal = ExtResource( 9 )

[node name="slot2" type="TextureButton" parent="MarginContainer/HBoxContainer/VBoxContainer/ScrollContainer/VBoxContainer"]
margin_top = 41.0
margin_right = 132.0
margin_bottom = 77.0
toggle_mode = true
texture_normal = ExtResource( 9 )

[node name="slot3" type="TextureButton" parent="MarginContainer/HBoxContainer/VBoxContainer/ScrollContainer/VBoxContainer"]
margin_top = 82.0
margin_right = 132.0
margin_bottom = 118.0
toggle_mode = true
texture_normal = ExtResource( 9 )

[node name="slot4" type="TextureButton" parent="MarginContainer/HBoxContainer/VBoxContainer/ScrollContainer/VBoxContainer"]
margin_top = 123.0
margin_right = 132.0
margin_bottom = 159.0
toggle_mode = true
texture_normal = ExtResource( 9 )

[node name="slot5" type="TextureButton" parent="MarginContainer/HBoxContainer/VBoxContainer/ScrollContainer/VBoxContainer"]
margin_top = 164.0
margin_right = 132.0
margin_bottom = 200.0
toggle_mode = true
texture_normal = ExtResource( 9 )

[node name="slot6" type="TextureButton" parent="MarginContainer/HBoxContainer/VBoxContainer/ScrollContainer/VBoxContainer"]
margin_top = 205.0
margin_right = 132.0
margin_bottom = 241.0
toggle_mode = true
texture_normal = ExtResource( 9 )

[node name="slot7" type="TextureButton" parent="MarginContainer/HBoxContainer/VBoxContainer/ScrollContainer/VBoxContainer"]
margin_top = 246.0
margin_right = 132.0
margin_bottom = 282.0
toggle_mode = true
texture_normal = ExtResource( 9 )

[node name="CenterContainer2" type="CenterContainer" parent="MarginContainer/HBoxContainer"]
margin_left = 230.0
margin_right = 321.0
margin_bottom = 149.0
size_flags_horizontal = 3
size_flags_vertical = 3

[node name="news" type="TextureRect" parent="MarginContainer/HBoxContainer/CenterContainer2"]
margin_left = 11.0
margin_top = 7.0
margin_right = 79.0
margin_bottom = 141.0
texture = ExtResource( 3 )

[node name="backtrak" type="AudioStreamPlayer" parent="."]
stream = ExtResource( 2 )
volume_db = -10.0

[node name="button_click" type="AudioStreamPlayer" parent="."]
stream = ExtResource( 1 )
volume_db = -10.0

[node name="new_news" type="AudioStreamPlayer" parent="."]
stream = ExtResource( 8 )
volume_db = -10.0

[node name="lost_money" type="AudioStreamPlayer" parent="."]
stream = ExtResource( 5 )
volume_db = -10.0

[node name="sell_item" type="AudioStreamPlayer" parent="."]
stream = ExtResource( 7 )
volume_db = -10.0

[node name="buy_item" type="AudioStreamPlayer" parent="."]
stream = ExtResource( 6 )
volume_db = -10.0

[node name="DetailsDialog" parent="." instance=ExtResource( 18 )]

[connection signal="pressed" from="MarginContainer/HBoxContainer/CenterContainer/itens/MarginContainer/VBoxContainer/MarginContainer/HBoxContainer/buy" to="." method="_on_buy_pressed"]
[connection signal="pressed" from="MarginContainer/HBoxContainer/CenterContainer/itens/MarginContainer/VBoxContainer/MarginContainer/HBoxContainer/sell" to="." method="_on_sell_pressed"]
[connection signal="pressed" from="MarginContainer/HBoxContainer/CenterContainer/itens/MarginContainer/VBoxContainer/ScrollContainer/VBoxContainer/bitcoin" to="." method="_on_bitcoin_pressed"]
[connection signal="pressed" from="MarginContainer/HBoxContainer/VBoxContainer/ScrollContainer/VBoxContainer/slot1" to="." method="_on_slot1_pressed"]
